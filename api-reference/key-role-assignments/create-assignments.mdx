---
title: 'Create/Update Role Assignments'
api: 'POST /api/v1/key-role-assignments'
description: 'Batch create or update internal team assignments to customer entities'
---

## Request Body

<ParamField body="assignments" type="array" required>
  Array of role assignment objects to create or update
  
  <Expandable title="Assignment Object">
    <ParamField body="roleKey" type="string" required>
      The key identifying the internal role (e.g., "csm", "ae", "onboarding_manager")
    </ParamField>
    
    <ParamField body="entityType" type="string" required>
      Type of entity: `company` or `account`
    </ParamField>
    
    <ParamField body="externalEntityId" type="string" required>
      External ID of the customer company or account
    </ParamField>
    
    <ParamField body="userEmail" type="string" required>
      Email address of the internal team member being assigned
    </ParamField>
    
    <ParamField body="tenure" type="object">
      Period during which this assignment is valid
      
      <Expandable title="Tenure Object">
        <ParamField body="startDate" type="string">
          Start date in YYYY-MM-DD format
        </ParamField>
        
        <ParamField body="endDate" type="string">
          End date in YYYY-MM-DD format (optional, omit for ongoing assignments)
        </ParamField>
      </Expandable>
    </ParamField>
  </Expandable>
</ParamField>

## Example Request

```bash
curl -X POST https://api.arali.ai/api/v1/key-role-assignments \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "assignments": [
      {
        "roleKey": "csm",
        "entityType": "company",
        "externalEntityId": "acme-corp",
        "userEmail": "sarah.jones@yourcompany.com",
        "tenure": {
          "startDate": "2024-01-01",
          "endDate": "2024-12-31"
        }
      },
      {
        "roleKey": "ae",
        "entityType": "account",
        "externalEntityId": "acme-enterprise-account",
        "userEmail": "john.smith@yourcompany.com",
        "tenure": {
          "startDate": "2024-01-01"
        }
      },
      {
        "roleKey": "onboarding_manager",
        "entityType": "company",
        "externalEntityId": "acme-corp",
        "userEmail": "mike.williams@yourcompany.com",
        "tenure": {
          "startDate": "2024-01-15",
          "endDate": "2024-03-15"
        }
      }
    ]
  }'
```

## Response

Returns the created/updated role assignment records with their IDs.

## Notes

- Assignments map your internal team members (CSM, AE, etc.) to customer companies or accounts
- Use consistent role keys across your organization (e.g., "csm", "ae", "onboarding_manager")
- Omit `endDate` for ongoing assignments
- Set `endDate` when team members transition off accounts to maintain historical records
