---
title: 'Add Product to Plan'
api: 'POST /api/v1/plans/{planId}/products'
description: 'Add a product to a specific plan'
---

## Path Parameters

<ParamField path="planId" type="string" required>
  The unique ID of the plan
</ParamField>

## Request Body

<ParamField body="productKey" type="string" required>
  The key of the product to add to the plan
</ParamField>

<ParamField body="isIncludedByDefault" type="boolean">
  Whether the product is included by default. Default: `true`
</ParamField>

<ParamField body="productEntitlementsJson" type="object">
  Optional entitlements configuration for this product. **Single object** (not an array). If omitted, access is binary.
  
  <Expandable title="Entitlement Object">
    <ParamField body="usage_key" type="string">
      The usage metric key that links to usage tracking (e.g., "images_processed", "storage_gb")
    </ParamField>
    
    <ParamField body="quantity" type="number">
      Units included in the plan. Set to `null` for unlimited.
    </ParamField>
    
    <ParamField body="validity_interval" type="string">
      Time unit: `month`, `year`, or `one_time`
    </ParamField>
    
    <ParamField body="validity_interval_count" type="number">
      Number of intervals between resets (e.g., 1 for monthly, 12 for annual)
    </ParamField>
    
    <ParamField body="overage_allowed" type="boolean">
      Whether usage can exceed the quantity limit
    </ParamField>
    
    <ParamField body="overage_rate" type="number">
      Price per unit when overage is allowed (in major currency units)
    </ParamField>
  </Expandable>
</ParamField>

## Example Request

```bash
curl -X POST https://api.arali.ai/api/v1/plans/{planId}/products \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "productKey": "advanced-search",
    "isIncludedByDefault": true,
    "productEntitlementsJson": {
      "usage_key": "search_queries",
      "quantity": 5000,
      "validity_interval": "month",
      "validity_interval_count": 1,
      "overage_allowed": true,
      "overage_rate": 0.005
    }
  }'
```

## Response

Returns the updated plan with the newly added product.

## Notes

- **`productEntitlementsJson` is optional**: If omitted, access is binary (either you have it or you don't)
- Use entitlements when you need to track usage limits, quotas, or metered access
