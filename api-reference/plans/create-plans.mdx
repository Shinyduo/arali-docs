---
title: 'Create/Update Plans'
api: 'POST /api/v1/plans'
description: 'Batch create or update plan records'
---

## Request Body

<ParamField body="plans" type="array" required>
  Array of plan objects to create or update
  
  <Expandable title="Plan Object">
    <ParamField body="key" type="string" required>
      Unique identifier for the plan (e.g., "premium", "basic")
    </ParamField>
    
    <ParamField body="name" type="string" required>
      Display name of the plan
    </ParamField>
    
    <ParamField body="description" type="string">
      Detailed description of the plan
    </ParamField>
    
    <ParamField body="status" type="string" required>
      Plan status: `active` or `archived`
    </ParamField>
    
    <ParamField body="pricingJson" type="object">
      Pricing configuration object
      
      <Expandable title="Pricing Object">
        <ParamField body="basePrice" type="number">
          Base price in major currency units (e.g., 99.99 for $99.99)
        </ParamField>
        
        <ParamField body="currency" type="string">
          Currency code (e.g., "USD", "EUR")
        </ParamField>
        
        <ParamField body="billingInterval" type="string">
          Billing frequency: `month`, `year`, or `one_time`
        </ParamField>
      </Expandable>
    </ParamField>
    
    <ParamField body="products" type="array">
      Array of products included in this plan
      
      <Expandable title="Product Reference">
        <ParamField body="productKey" type="string">
          The key of the product to include
        </ParamField>
        
        <ParamField body="isIncludedByDefault" type="boolean">
          Whether the product is included by default
        </ParamField>
        
        <ParamField body="productEntitlementsJson" type="object">
          Optional entitlements configuration for this product. **Single object** (not an array). If omitted, access is binary.
          
          <Expandable title="Entitlement Object">
            <ParamField body="usage_key" type="string">
              The usage metric key that links to usage tracking (e.g., "images_processed", "storage_gb")
            </ParamField>
            
            <ParamField body="quantity" type="number">
              Units included in the plan. Set to `null` for unlimited.
            </ParamField>
            
            <ParamField body="validity_interval" type="string">
              Time unit: `month`, `year`, or `one_time`
            </ParamField>
            
            <ParamField body="validity_interval_count" type="number">
              Number of intervals between resets (e.g., 1 for monthly, 12 for annual)
            </ParamField>
            
            <ParamField body="overage_allowed" type="boolean">
              Whether usage can exceed the quantity limit
            </ParamField>
            
            <ParamField body="overage_rate" type="number">
              Price per unit when overage is allowed (in major currency units)
            </ParamField>
          </Expandable>
        </ParamField>
      </Expandable>
    </ParamField>
  </Expandable>
</ParamField>

## Example Request

```bash
curl -X POST https://api.arali.ai/api/v1/plans \
  -H "Authorization: Bearer YOUR_API_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "plans": [
      {
        "key": "premium",
        "name": "Premium Plan",
        "description": "Our premium tier with all features",
        "status": "active",
        "pricingJson": {
          "basePrice": 99.99,
          "currency": "USD",
          "billingInterval": "month"
        },
        "products": [
          {
            "productKey": "image-analysis",
            "isIncludedByDefault": true,
            "productEntitlementsJson": {
              "usage_key": "images_processed",
              "quantity": 10000,
              "validity_interval": "month",
              "validity_interval_count": 1,
              "overage_allowed": true,
              "overage_rate": 0.01
            }
          },
          {
            "productKey": "advanced-search",
            "isIncludedByDefault": true
          }
        ]
      },
      {
        "key": "basic",
        "name": "Basic Plan",
        "description": "Starter plan",
        "status": "active",
        "pricingJson": {
          "basePrice": 29.99,
          "currency": "USD",
          "billingInterval": "month"
        },
        "products": [
          {
            "productKey": "core_platform",
            "isIncludedByDefault": true
          }
        ]
      }
    ]
  }'
```

## Response

Returns the created/updated plan records with their generated IDs and associated products.
